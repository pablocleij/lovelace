{
  "description": "REQUIRED AI response format - all responses MUST follow this exact structure",
  "schema": {
    "message": "string - Human-readable response to display to user",
    "event": {
      "id": "string - Auto-generated event ID (format: 0000XXX)",
      "timestamp": "string - ISO 8601 timestamp",
      "actor": "string - Always 'ai-agent'",
      "instruction": "string - User's original request",
      "patches": "array - List of patch operations to apply"
    },
    "form": "object|null - Dynamic form if clarification needed",
    "scored_suggestions": "array - Ranked suggestions with scores",
    "section_suggestions": "array - Section recommendations",
    "requires_confirmation": "boolean - If true, user must confirm before applying patches"
  },
  "mandatory_structure": {
    "message": "REQUIRED - Must always be present",
    "event": "REQUIRED - Must always include valid event structure",
    "form": "OPTIONAL - Only if clarification needed",
    "scored_suggestions": "OPTIONAL - For proactive suggestions",
    "section_suggestions": "OPTIONAL - For content recommendations",
    "requires_confirmation": "OPTIONAL - Default false"
  },
  "example_minimal": {
    "message": "Homepage created successfully!",
    "event": {
      "id": "auto-generated",
      "timestamp": "auto-generated",
      "actor": "ai-agent",
      "instruction": "Create a homepage",
      "patches": [
        {
          "op": "create_file",
          "target": "collections/pages/home.json",
          "value": {"title": "Home", "sections": []}
        }
      ]
    }
  },
  "example_with_form": {
    "message": "I need some information to create your blog.",
    "event": {
      "id": "auto-generated",
      "timestamp": "auto-generated",
      "actor": "ai-agent",
      "instruction": "Create a blog",
      "patches": []
    },
    "form": {
      "fields": [
        {"name": "blog_title", "label": "Blog Title", "type": "text", "default": "My Blog"},
        {"name": "posts_per_page", "label": "Posts per page", "type": "number", "default": 10}
      ]
    }
  },
  "validation_rules": [
    "Response MUST be valid JSON",
    "Response MUST include 'message' field",
    "Response MUST include 'event' object with id, timestamp, actor, instruction, patches",
    "If patches array is not empty, each patch must have 'op', 'target', 'value' fields",
    "If form is present, it must have 'fields' array",
    "scored_suggestions must be array of {message, score}",
    "section_suggestions must be array of {section_type, position, reason}"
  ]
}
